<!doctype html>
<html lang="ca">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Problema de navegació — Tarifa → Ceuta (didàctic detallat)</title>

<script>
window.MathJax = {
  tex: {inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$','$$']]},
  svg: {fontCache: 'global'}
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
  /*La línia 25 diu que tot el text del html que està en el body, agafi el tipus de lletra arial, si no troba arial,
  agafa lletra el Helvetica i si no el troba agafa qualsevol lletra de tipus sans-serif, sense serifa o sense adornaments.
  Margin de 20 pixels al voltant de tot el contingut per assegurarnos de deixar separats els continguts dels cuatre costats.
  Line-height és el espai vertical entre línies de text, que per defecte depèn del tipus de lletra i acostuma a ser 1,2 1,4,
  significa que entre una línia i la següent hi ha una separació del 120% o 140%. Nosaltres hem triat liníes més separades un
  170%. El color #123 és un color hexadecimal i sempre té 6 digits #rrggbb,sent cada lletra un número entre el 0 i el 9 o  A(10)
  B(11)C(12)D(13)E(14)F(15).Quan veiem 3 números estem veiem un hexadecimal abreujat i realment és el #112233 i aquest correspon
  al rgb17,34,51 en decimal que és un blau fosc.*/
body{font-family:Arial,Helvetica,sans-serif;margin:20px;line-height:1.7;color:#123}
  /*La línia 27 canvia els titols grans (h1), titols mitjans (h2), titols petits (h3) a un color blau fosc*/
h1,h2,h3{color:#0b3d91}
  /* La línia 32 és una classe que afecta a la línia 120 on s'escriu les formules matemàtiques i fa que les formules tinguin un
  color gris clar de fons (background), un espais intern dintre de la caixa de la formula perquè no toqui els costats de 12
  pixels(padding), unes cantonades arrodonides(border-radius),un espai vertical abans i desprès de la caixa (margin) i que
  el text de la formula estigui dins de la caixa*/
.formula{background:#f7f7f9;padding:12px;border-radius:6px;margin:10px 0;text-align:center}
     /* A la línia 36 tenim els estils de la taula generals, que es troba a la línia 54, el Collapse fa que les línies de les
  taules siguin senzilles i no línies dobles ( surten per defecte sempre dobles). El marge dona un espai abans de la taula i
  desprès de la taula. */    
table{border-collapse:collapse;margin:10px 0}
  /*td és una cel·la i significa table data o dada de una taula o cel·la i th és table heading que és la primera filera de una
  taula. Tant les cel·les normals com les cel·les de les primeres fileres, tenen un espai intern de 6 pixels.
  El contorn"border" serà d'un pixel i sólid perquè podria ser dashed(amb ratlles) o dotted(punts).
  El color ccc és #cccccc ja que està abreujat.És un color gris clar perquè és quan els 3 números són iguals.
  C és un número hexadecimal(12) i és de color clar perquè s'aproxima a #FFFFFF 
  que és el gris més clar o blanc.*/
td,th{padding:6px;border:1px solid #ccc}
.step{margin:10px 0;padding-left:15px;border-left:3px solid #0b3d91}
  /*Quan tenim un punt al principi de css és una classe i es pot posar més cops, quan tenim un # és un identificador que només 
  es por posar una vegada
  La classe step surt a les línies 70,71,79,80... Perquè ens permet escriure els passos detallats amb les formules.
  Volem un espai al voltant de cada pas matemàtic de 10px en totes direccions, també volem que només a la esquerra
  hi hagi un marge interior(padding-left). Vull una barra vertical blava sòlida de 3px per marcar cada pas o step,
  és de 3px de gruix i sòlida.*/
  
.note{margin:8px 0;padding:8px;background:#fff8dc;border-left:4px solid #ffcc00}
  /*Note és una nota eplicativa que volem que sorti separada i destacada del text. Li posem un marge vertical
  al voltant de la nota de 8px i també interni de la mateixa mida(8px).Li posem un background diferent color crema
  i una barra groga de 4px a l'esquerra.*/
img {
  /*La línia 56 afecta a totes les imatges del document(html)*/
  max-width: 100%;
  /*La línia 58 fa que mai sigui més ample que el seu contenidor, i que s'intenti adaptar al 100%. */
  height: auto;
  /*Això fa que es mantingui les proporcions de la imatge, perquè li hem dit que la alçada sigui automàtica i que 
  la amplada sigui la mateixa que la del contenidor. Això farà que s'adapti la imatge al ample de la pantalla i que no
  es deformi.*/
  
  display: block; /* opcional: elimina pequeños espacios debajo de la imagen */
  /*Evita petits espais sota la imatge que apareixen per defecte amb inline, si no poso res entén display:inline i
  deixa un espai a sota de la imatge que no volem.*/
}
</style>
</head>
<body>
<h1>Problema de navegació — Tarifa → Ceuta</h1>
  <!--h1 és un títo gran, h2 és més petit(un subtítol), h3 és encara més petit. Existeixen h4,h5,h6 però poden ser mès petit que el 
  paràgraf però depèn del tipus de lletra o font de la lletra.-->

<h2>0) Conversió de coordenades (DMS → decimal)</h2>
<p>Per treballar amb fórmules trigonomètriques, necessitem les coordenades en decimal. A continuació convertim pas a pas.</p>

<h3>Tarifa</h3>
  <!--Les taules han de tenir la etiqueta table per començar i acabar i cada línia o filera de la taula s'anomena
 en anglés row i l'etiqueta tr vol dir table row o filera de taula i ha de posar-se a l'inici i al final de table row
  en una filera com la 83,83 i 85
  Dintre de tr poder haver th o td. th vol dir table heading o títol de la taula. td vol dir table data o dada de la taula,
  cada th i cada th es una cel·la de ka taula. Les th acostumen a posar-se en negreta per distingir-se com a títol.-->
<table>
<tr><th>Latitud (DMS)</th><td>36º 0' 45" N</td></tr>
<tr><th>Longitud (DMS)</th><td>5º 36' 20.16" W</td></tr>
</table>

<div class="step">Per convertir a decimal: $$Lat = 36 + \frac{0}{60} + \frac{45}{3600} = 36.0125^\circ$$</div>
<div class="step">I la longitud: $$Lon = (-5 + \frac{36}{60} + \frac{20.16}{3600}) = -5.6056^\circ$$</div>
  <!--Un divisor(div) com el de la línia 90 o 91 es un troç de codi que te un sistema de identificació que pot ser un id, 
  en comptes de class= posariem id= i en aquest segon cas només podria haver una sola vegada, per exemple id="step1" i no
  por haver repetit "step1" en un altre divisor perquè és uns id, en canvi step por anar repetit ja que no és una id, sinó
  una clsse. Recorda que en el codi #css tenim un .step a la línia 44,si tinguessim "step1" comm a identificador hauríem
  de posar a la línia 44 #step1.
  Quina és la funció de la class i del identidicador? La class el podem posar més d'un cop i és més general, i el id és un
  element únic.-->

<h3>Ceuta</h3>
<table>
<tr><th>Latitud (DMS)</th><td>35º 53' 17.88" N</td></tr>
<tr><th>Longitud (DMS)</th><td>5º 18' 56.16" W</td></tr>
</table>
<!--A continuació veiem diferents codis amb JavaScript emprant la bibloteca MathJax, el doble $$ serveix per avisar al navegador de que a 
  continuació el codi es MathJax i l'ha de renderitzar o visualitzar segons el LaTex que és el llenguarge matemàtic.
  Anem a explicar eld diferents símbols:
  \frac{A}{B} significa que dividim A entre B(A/B).
  35.8883^\circ significa el ^(sombreret) elevat a i la barra inclinada circ (\circ) significa º el símbol del grau.
  Si poso \Delta és una delta majuscula que te forma de triangle
  \lambda és aquests símbol λ, que és una lletra grega que s'utilitza a matemàtique per expressar la longitud.
  \varphi es la lletra grega φ, phi i es pronuncia fi i correspon a la latitud.
  \times aquest és el símbol de multiplicar, x una mica més gran sense arribar a ser una X majúscula.
  \pi és el símbol π
  \varphi_{rad}, si posem una barra baixa vol dir subíndex i el posem entre claus el que volem que apareixi en subíndex,
  apareixera la lletra φ amb un subíndex amb la paraula rad perquè volem expressar la latitud no en graus º sino en radiants
  que es la unitat del sistema internacional(SI)
  Si poso Lat_{(Tarifa)}, Tarifa serà un subíndex sota la paraula Lat.
  \text{ rad} permet escriure el text normal rad dintre de una MathJax.
  $$a = \sin^2\left(\frac{\Delta \varphi}{2}\right) + \cos(Lat_{Tarifa} \frac{\pi}{180}) \cos(Lat_{Ceuta} \frac{\pi}{180}) \sin^2\left(\frac{\Delta \lambda}{2}\right)$$
  sin^2 el sombreret és elevat a la 2, \left és per obrir el parentesis esquerra i \right és per tancar el parentesi.
  \approx és el símbol de doble titlla ≈ que significa aproximadament.
  \arctan2(y,x) és un tipus especial de arctangent anomenta arctangent 2 i en comptes d'anar de 0 a 360º, es a dir de 0
  a 2 pi radiants que es com funciona la tan i la arctan normal. Com el robot no pot donar la volta completa i va entre pi i -pi
  es a dir apliquem la funció arctang 2 que funciona a la meitat del cercle 
  -->
<div class="step">Latitud en decimal: $$Lat = 35 + \frac{53}{60} + \frac{17.88}{3600} = 35.8883^\circ$$</div>
<div class="step">Longitud en decimal: $$Lon = (-5 + \frac{18}{60} + \frac{56.16}{3600}) = -5.3156^\circ$$</div>

<h2>1) Diferències angulars</h2>
<div class="step">$$\Delta \varphi = Lat_{(Ceuta)} - Lat_{(Tarifa)} = -0.1242^\circ$$</div>
<div class="step">$$\Delta \lambda = Lon_{(Ceuta)} - Lon_{(Tarifa)} = 0.2900^\circ$$</div>
<p>Convertim a radians, ja que trigonometria utilitza radians:</p>
<div class="step">$$\Delta \varphi_{rad} = -0.1242 \times \frac{\pi}{180} = -0.0021661 \text{ rad}$$</div>
<div class="step">$$\Delta \lambda_{rad} = 0.2900 \times \frac{\pi}{180} = 0.005061 \text{ rad}$$</div>

<h2>2) Distància amb Haversine</h2>
<p>Haversine permet calcular distància sobre la superfície esfèrica de la Terra:</p>
<div class="step">$$a = \sin^2\left(\frac{\Delta \varphi}{2}\right) + \cos(Lat_{Tarifa} \frac{\pi}{180}) \cos(Lat_{Ceuta} \frac{\pi}{180}) \sin^2\left(\frac{\Delta \lambda}{2}\right)$$</div>
<div class="step">$$a \approx 3.39 \times 10^{-6}$$</div>
<div class="step">$$c = 2 \arcsin(\sqrt{a}) \approx 0.003657 \text{ rad}$$</div>
<div class="step">Convertim a milles nàutiques: $$d_{NM} = c \text{ (6371·1.852)} \approx 15.945 \text{ NM}$$</div>

<h2>3) Rumb inicial</h2>
<p>El rumb indica la direcció inicial cap a Ceuta:</p>
<div class="step">$$y = \sin(\Delta \lambda_{rad}) \cos(Lat_{Ceuta} \frac{\pi}{180}) \approx 0.004153$$</div>
<div class="step">$$x = \cos(Lat_{Tarifa} \frac{\pi}{180}) \sin(Lat_{Ceuta} \frac{\pi}{180}) - \sin(Lat_{Tarifa} \frac{\pi}{180}) \cos(Lat_{Ceuta} \frac{\pi}{180}) \cos(\Delta \lambda_{rad}) \approx 0.00195$$</div>
<div class="step">$$\theta = \arctan2(y,x) \approx 117.79^\circ$$</div>

<h2>4) Aproximació plana</h2>
<p>Per veure-ho de manera geomètrica simple:</p>
<div class="step">Component Nord-Sud: $$NS = |\Delta Lat| \times 60 = 0.1242 \times 60 = 7.45 \text{ NM}$$</div>

<p class="note">Un grau de latitud és constant a tota la Terra i representa aproximadament 60 milles nàutiques (111 km) entre paral·lels... Si
estic al equador un segon és una milla,perquè cos de 0 és 1 i dona una  milla. A Barcelona estic a 42 graus de latitud i per tant un segon de
longitud seria cos de 42 milles=0,74 milles. Si vaig més cap al Nord a Islàndia, la latitud de 60 graus i el cos de la latitud és 0,5 i vol dir
que un segon de longitud serà mitja milla. En el pol nord o pol sud,l'angle de latitud és 90 graus i el cos de 90 és 0, per tant tenim 0 milles
de distància. </p>

<div class="step">Longitud a lat mitjana: $$1^\circ lon = 60 \cos(35.95^\circ) \approx 49.2 \text{ NM}$$</div>
<div class="step">Component Est-Oest: $$EW = \Delta Lon \times 49.2 = 0.2900 \times 49.2 \approx 14.27 \text{ NM}$$</div>
<div class="step">Distància total: $$d = \sqrt{NS^2 + EW^2} \approx 16.1 \text{ NM}$$</div>

<h2>5) Temps de travessia</h2>
<p>Temps = distància / velocitat:</p>
<div class="step">$$t = \frac{d_{NM}}{V} = \frac{15.945}{6} = 2.6575 \text{ h}$$</div>
<p>Convertim decimals a h:m:s pas a pas:</p>
<div class="step">$$H = \lfloor 2.6575 \rfloor = 2h$$</div>
<div class="step">$$M = \lfloor 39.45 \rfloor = 39m$$</div>
<div class="step">$$S = (39.45-39)\times 60 = 27s$$</div>
<div class="step">Temps final: $$t = 2h;39m;27s$$</div>
<div class="step">Hora d'arribada: $$09:42:54 + 2:39:27 = 12:22:21$$</div>

<h2>6) Consum i cost de combustible</h2>
<div class="step">Consum total: $$Q = 18 \times 2.6575 \approx 47.84 L$$</div>
<div class="step">Cost: $$Cost = 47.84 \times 1.425 \approx 68.17 €$$</div>

<h2>7) Vector de velocitat, corrent i vent (detall pas a pas)</h2>
<p>Per calcular la trajectòria real de la nau, hem de combinar el vector de velocitat de la nau amb els vectors de corrent i vent...</p>

<h3>Formules generals</h3>
<div class="formula">$$u = s\sin\theta, \quad v = s\cos\theta$$<br>on s és la velocitat del vector i θ el rumb en graus.</div>

<h3>Pas 1: Nau</h3>
<p>Velocitat de la nau s = 6 kn, rumb θ = 117.8°:</p>
<div class="step">Calcul del component Est (u):<br>$$u_{nau} = 6 \times \sin(117.8°) \approx 5.31$$</div>
<div class="step">Calcul del component Nord (v):<br>$$v_{nau} = 6 \times \cos(117.8°) \approx -2.805$$</div>

<h3>Pas 2: Corrent</h3>
<p>Velocitat de la corrent s = 1.5 kn, rumb θ = 120°:</p>
<div class="step">$$u_{corrent} = 1.5 \times \sin(120°) \approx 1.30$$</div>
<div class="step">$$v_{corrent} = 1.5 \times \cos(120°) \approx -0.75$$</div>

<h3>Pas 3: Vent</h3>
<p>Velocitat del vent s = 12 kn, rumb θ = 150°:</p>
<div class="step">$$u_{vent} = 12 \times \sin(150°) \approx 6.00$$</div>
<div class="step">$$v_{vent} = 12 \times \cos(150°) \approx -10.39$$</div>

<h3>Pas 4: Suma de vectors</h3>
<p>Sumem component a component per obtenir el vector resultant:</p>
<div class="step">Component Est (u):<br>$$u_{res} = u_{nau} + u_{corrent} + u_{vent} = 5.31 + 1.30 + 6.00 \approx 12.61$$</div>
</body>
</html>
